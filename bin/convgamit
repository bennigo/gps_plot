#!/usr/bin/python
# -*- coding: iso-8859-15 -*-


def main():
    """
    """
    import argparse
    import sys
    import numpy as np

    import timesmatplt.timesmatplt as tpl
    import timesfunc.timesfunc as gtf
    from gtimes.timefunc import convfromYearf



    parser = argparse.ArgumentParser(description='Return GAMIT time series in UTC NEU format.')    
    parser.add_argument('Stations',nargs='+', help='List of stations')
    parser.add_argument("-f", action="store_true", help="write to *.NEU file")

    args = parser.parse_args()

    stations = args.Stations # station list
    wfile = args.f
    
    # done parsing arguments
    fmt=["%s"] + ["%7.4f",]*6
    outFile=sys.stdout

    for sta in stations:
       
        if wfile:
            outFile=sta+".NEU"

        # Fetch the gamit time series and return them in the format 
        # 'UTC (%Y/%m/%d %H:%M:%s.000) N[m] E[m] U[m] DN[m] DE[m] DU[m]
        NEUdata=gtf.gamittoNEU(sta) 
        
        np.savetxt(outFile, NEUdata, fmt=fmt, delimiter='\t', newline='\n', header='UTC(%Y/%m/%d %H:%M:%s.000)\tN[m]\tE[m]\tU[m]\tDN[m]\tDE[m]\tDU[m]', footer='', comments='#')


if __name__=="__main__":
     main()
